<div
  *ngIf="{
    success: success$ | async,
    isLoading: isLoading$ | async,
  } as view"
>
  <div>
    <div *ngIf="view.success; else showForm">
      <p>Thank you for your message! I will be in contact shortly.</p>
    </div>

    <ng-template #showForm>
      <form [formGroup]="contactForm" (ngSubmit)="onSubmit()">
        <p>Use the form below to contact me</p>
        <div>
          <div>
            <input
              name="name"
              placeholder="Name"
              type="text"
              required
              autofocus
              formControlName="name"
            />
          </div>
          <div>
            <input
              name="email"
              placeholder="Email"
              type="email"
              required
              formControlName="email"
            />
          </div>
        </div>
        <textarea
          name="message"
          placeholder="Message"
          rows="5"
          required
          formControlName="message"
        ></textarea>
        <div>
          <div>
            <small
              >By using the contact form you are giving me permission to store
              your name, email and message within Google Sheets. Once I have
              responsed, your details will be removed this is usually within 3-5
              days.</small
            >
          </div>
        </div>
        <div>
          <div>
            <button
              [disabled]="view.isLoading || !contactForm.valid"
              type="submit"
            >
              Submit
            </button>
          </div>
        </div>
      </form>
    </ng-template>
  </div>
</div>
